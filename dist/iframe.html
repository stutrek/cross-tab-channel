<!doctype html>
<html>
	<head>
		<title>Cross Tab Channel iFrame</title>
		<script type="text/javascript">
			var trustedDomain = '//127.0.0.1:3000';
		</script>
	<script type="text/javascript">!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("CrossTabIframe",[],t):"object"==typeof exports?exports.CrossTabIframe=t():e.CrossTabIframe=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e){window.parent.postMessage(JSON.stringify(e),d)}function s(e,t){var n={isCrossTab:!0,channel:e,message:t};i(n)}function r(e){return function(t){s(e,t)}}var a=n(1),f=o(a),c={},u={},d=window.trustedDomain;0===d.indexOf("//")&&(d=window.location.protocol+d),window.addEventListener("message",function(e){if(e.origin===d){try{var t=JSON.parse(e.data)}catch(e){return}var n=t.channel;if(t.isCrossTab){var o=t.message;c[n].emit(o)}if(t.isCrossTabAdd&&!c[n]){c[n]=new f.default(n);var i=r(n);u[n]=i,c[n].listen(i)}t.isCrossTabRemove&&(c[n].remove(u[n]),delete c[n])}}),i({isCrossTabStartup:!0})},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=Math.random(),i=function e(t){var i=this;n(this,e),this.listen=function(e){i.listeners.indexOf(e)===-1&&i.listeners.push(e)},this.remove=function(e){i.listeners=i.listeners.filter(function(t){return t!==e})},this.emit=function(e){var t={origin:o,data:e};localStorage.setItem("cross-tab-"+i.id,JSON.stringify(t)),setTimeout(function(){localStorage.removeItem("cross-tab-"+i.id)},0)},this.id=t,this.listeners=[],"undefined"!=typeof window&&window.addEventListener("storage",function(e){if(e.newValue&&e.key==="cross-tab-"+i.id){var t=JSON.parse(e.newValue);t.origin!==o&&i.listeners.forEach(function(e){e(t.data)})}})};e.exports=i}])});
//# sourceMappingURL=CrossTabIframe.js.map</script></head>
	<body></body>
</html>
